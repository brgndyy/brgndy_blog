FROM node:18-alpine

ARG MYSQL_HOST

ARG MYSQL_DATABASE

ARG MYSQL_USER

ARG MYSQL_ROOT_PASSWORD

ARG MYSQL_PORT

ARG JWT_SIGNATURE

ARG BACK_END_NODE_ENV

ARG BUCKET_NAME

ARG BUCKET_REGION

ARG ACCESS_KEY

ARG SECRET_ACCESS_KEY

ENV MYSQL_HOST=$MYSQL_HOST

ENV MYSQL_DATABASE=$MYSQL_DATABASE

ENV MYSQL_USER=$MYSQL_USER

ENV MYSQL_ROOT_PASSWORD=$MYSQL_ROOT_PASSWORD

ENV MYSQL_PORT=$MYSQL_PORT

ENV JWT_SIGNATURE=$JWT_SIGNATURE

ENV BACK_END_NODE_ENV=$BACK_END_NODE_ENV

ENV BUCKET_NAME=$BUCKET_NAME

ENV BUCKET_REGION=$BUCKET_REGION

ENV ACCESS_KEY=$ACCESS_KEY

ENV SECRET_ACCESS_KEY=$SECRET_ACCESS_KEY

WORKDIR /app

COPY package.json .

RUN npm install 

COPY . .

EXPOSE 80

CMD [ "npm", "start" ]
